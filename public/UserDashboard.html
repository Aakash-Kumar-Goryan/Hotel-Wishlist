<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>CREEP ACCESS HOTELS</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
	<meta name="keywords" content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
	<meta name="author" content="FREEHTML5.CO" />

	<!-- 
	//////////////////////////////////////////////////////

	FREE HTML5 TEMPLATE 
	DESIGNED & DEVELOPED by FREEHTML5.CO
		
	Website: 		http://freehtml5.co/
	Email: 			info@freehtml5.co
	Twitter: 		http://twitter.com/fh5co
	Facebook: 		https://www.facebook.com/fh5co

	//////////////////////////////////////////////////////
	 -->

	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content="" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="" />
	<meta property="og:site_name" content="" />
	<meta property="og:description" content="" />
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">
	<!-- <link href='https://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700italic,900,700,900italic' rel='stylesheet' type='text/css'> -->

	<!-- Stylesheets -->
	<!-- Dropdown Menu -->
	<link rel="stylesheet" href="css/superfish.css">
	<!-- Owl Slider -->
	<!-- <link rel="stylesheet" href="css/owl.carousel.css"> -->
	<!-- <link rel="stylesheet" href="css/owl.theme.default.min.css"> -->
	<!-- Date Picker -->
	<link rel="stylesheet" href="css/bootstrap-datepicker.min.css">
	<!-- CS Select -->
	<link rel="stylesheet" href="css/cs-select.css">
	<link rel="stylesheet" href="css/cs-skin-border.css">

	<!-- Themify Icons -->
	<link rel="stylesheet" href="css/themify-icons.css">
	<!-- Flat Icon -->
	<link rel="stylesheet" href="css/flaticon.css">
	<!-- Icomoon -->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">

	<!-- Style -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

</head>

<body>
	<div id="fh5co-wrapper">
		<div id="fh5co-page">
			<div id="fh5co-header">
				<header id="fh5co-header-section">
					<div class="container">
						<div class="nav-header">
							<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
							<h1 id="fh5co-logo"><a href="index.html">Creep Access</a></h1>
							<nav id="fh5co-menu-wrap" role="navigation">
								<ul class="sf-menu" id="fh5co-primary-menu">
									<li><a href="#">Home</a></li>
									<li><a href="#" onclick="openWishList()">Open Wishlist</a></li>
									<li><a href="/logout">Logout</a></li>
								</ul>
							</nav>
						</div>
					</div>
				</header>

			</div>
			<!-- end:fh5co-header -->
			<aside id="fh5co-hero" class="js-fullheight">
				<div class="flexslider js-fullheight">
					<ul class="slides">
						<li style="background-image: url(images/slider1.jpg);">
							<div class="overlay-gradient"></div>
							<div class="container">
								<div class="col-md-12 col-md-offset-0 text-center slider-text">
									<div class="slider-text-inner js-fullheight">
										<div class="desc">
											<p><span>Creep Access Hotels</span></p>
											<h2>Reserve Room for Family Vacation</h2>
										</div>
									</div>
								</div>
							</div>
						</li>
						<li style="background-image: url(images/slider3.jpg);">
							<div class="overlay-gradient"></div>
							<div class="container">
								<div class="col-md-12 col-md-offset-0 text-center slider-text">
									<div class="slider-text-inner js-fullheight">
										<div class="desc">
											<p><span>Creep Access Hotels</span></p>
											<h2>Reserve Room for Family Vacation</h2>
										</div>
									</div>
								</div>
							</div>
						</li>

					</ul>
				</div>
			</aside>
			<div class="wrap">
				<div class="container">
					<div class="row">
						<div id="availability">
							<div>
								<div class="a-col">
									<section>
										<select class="cs-select cs-skin-border" id="city">
											<option value="" disabled selected>Select Hotel</option>
											<option value="0">Bangalore</option>
											<option value="1">Chennai</option>
											<option value="2">Delhi</option>
											<option value="3">Guwahati</option>
											<option value="4">Hyderabad</option>
											<option value="5">Kolkata</option>
											<option value="6">Mumbai</option>
										</select>
									</section>
								</div>
								<div class="a-col alternate">
									<div class="input-field">
										<label for="date-start">Check In</label>
										<input type="text" class="form-control" id="date-start" name="checkin" />
									</div>
								</div>
								<div class="a-col alternate">
									<div class="input-field">
										<label for="date-end">Check Out</label>
										<input type="text" class="form-control" id="date-end" name="checkout" />
									</div>
								</div>
								<button class="a-col action" type="submit" onclick="showHotels()">
									<a href="#">
										<span>Check</span>
										<span>Availability</span>
									</a>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="fh5co-blog-section" class="hotels-list">
				<div class="container">
					<div class="row">
						<div class="col-md-12">
							<div class="section-title text-center">
								<h2>Hotels List</h2>
								<div class="row">
									<div class="col-sm-4"></div>
									<button class="btn btn-success col-sm-2" onclick="addToWishList()">Add to WishList</button>
									<button class="btn btn-primary col-sm-2" onclick="openWishList()">Open WishList</button>
								</div>
								<ul id="hotels" class="row">
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="fh5co-blog-section" class="wished-list">
				<div class="container">
					<div class="row">
						<div class="col-md-12">
							<div class="section-title text-center">
								<h2>Your Wish List</h2>
								<ul id="wished-items" class="row">
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			<footer id="footer" class="fh5co-bg-color">
				<div class="container">
					<div class="row">
						<div class="col-md-3">
							<div class="copyright">
								<p><small>&copy; 2020 Creep Access <br> All Rights Reserved. <br>
							</div>
						</div>
						<div class="col-md-6">
							<div class="row">
								<div class="col-md-3">
									<h3>Company</h3>
									<ul class="link">
										<li><a href="#">About Us</a></li>
										<li><a href="#">Hotels</a></li>
										<li><a href="#">Customer Care</a></li>
										<li><a href="#">Contact Us</a></li>
									</ul>
								</div>
								<div class="col-md-3">
									<h3>Our Facilities</h3>
									<ul class="link">
										<li><a href="#">Resturant</a></li>
										<li><a href="#">Bars</a></li>
										<li><a href="#">Pick-up</a></li>
										<li><a href="#">Swimming Pool</a></li>
										<li><a href="#">Spa</a></li>
										<li><a href="#">Gym</a></li>
									</ul>
								</div>
								<div class="col-md-6">
									<h3>Subscribe</h3>
									<p>Sed cursus ut nibh in semper. Mauris varius et magna in fermentum. </p>
									<form action="#" id="form-subscribe">
										<div class="form-field">
											<input type="email" placeholder="Email Address" id="email">
											<input type="submit" id="submit" value="Send">
										</div>
									</form>
								</div>
							</div>
						</div>
						<div class="col-md-3">
							<ul class="social-icons">
								<li>
									<a href="#"><i class="icon-twitter-with-circle"></i></a>
									<a href="#"><i class="icon-facebook-with-circle"></i></a>
									<a href="#"><i class="icon-instagram-with-circle"></i></a>
									<a href="#"><i class="icon-linkedin-with-circle"></i></a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</footer>

		</div>
		<!-- END fh5co-page -->

	</div>
	<!-- END fh5co-wrapper -->

	<!-- Javascripts -->
	<script src="js/jquery-2.1.4.min.js"></script>
	<!-- Dropdown Menu -->
	<script src="js/hoverIntent.js"></script>
	<script src="js/superfish.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Counters -->
	<script src="js/jquery.countTo.js"></script>
	<!-- Stellar Parallax -->
	<script src="js/jquery.stellar.min.js"></script>
	<!-- Owl Slider -->
	<!-- // <script src="js/owl.carousel.min.js"></script> -->
	<!-- Date Picker -->
	<script src="js/bootstrap-datepicker.min.js"></script>
	<!-- CS Select -->
	<script src="js/classie.js"></script>
	<script src="js/selectFx.js"></script>
	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>

	<script src="js/custom.js"></script>
	<script>
		$(".hotels-list").hide();
		$(".wished-list").hide();
		var wishList = [];
		var data = [];
		$("#sf-menu").on('click','li',function(){
			// remove classname 'active' from all li who already has classname 'active'
			$("#sf-menu li.active").removeClass("active");
			// adding classname 'active' to current click li
			$(this).addClass("active");
		});
		async function showHotels() {
			var city = $('#city').find(":selected").val();
			$(".wished-list").hide();
			$(".hotels-list").show();
			var url = "hotel?City=" + city;
			let response = await fetch(url);
			data = await response.json();
			for (i = 0; i < data.length; i++) {
				data[i].wished = false;
				$("#hotels").append("<li class='thumbnail' class='col-sm-4'>\n" +
					"<div class='caption'>\n" +
					"<h3>Name: " + data[i].Name + "</h3>\n" +
					"<p>Price: " + data[i].Price[0] + "</p>\n" +
					"<p>Rating: " + data[i].Rating[0] + "</p>\n" +
					"<p>Address: " + data[i].Address[0] + "</p>\n" +
					"<button id='hotel-" + i + "-add' onclick='addWish(" + i + ")' class='btn btn-success'>Add</button>\n" +
					"<button id='hotel-" + i + "-remove' onclick='removeWish(" + i + ")' class='btn btn-danger'>Remove</button>\n" +
					"</div>\n" +
					"</li>");
				$('#hotel-' + i + '-remove').hide();
			}
		}

		function addWish(index) {
			data[index].wished = true;
			$('#hotel-' + index + '-add').hide();
			$('#hotel-' + index + '-remove').show();
		}
		function removeWish(index) {
			data[index].wished = false;
			$('#hotel-' + index + '-add').show();
			$('#hotel-' + index + '-remove').hide();
		}
		function addToWishList() {
			for (let i = 0; i < data.length; i++) {
				if (data[i].wished) {
					wishList.push(data[i]);
				}
			}
			console.log(wishList);
			fetch("/wishlist",
				{
					headers: {
						'Accept': 'application/json',
						'Content-Type': 'application/json'
					},
					method: "POST",
					body: JSON.stringify({ wishlist: wishList })
				})
				.then(function (res) {
					alert("Your wish is now our responsibility!");
					console.log(res)
				})
				.catch(function (res) { console.log(res) })
		}
		function removeWished(index) {
			fetch("/wishlist",
					{
						headers: {
							'Accept': 'application/json',
							'Content-Type': 'application/json'
						},
						method: "DELETE",
						body: JSON.stringify({ id: data[index]._id })
					})
					.then(function (res) {
						console.log(res)
						alert("Your Wish Granted!");
						openWishList();
					})
					.catch(function (res) { console.log(res) })
		}
		async function openWishList() {
			$(".hotels-list").hide();
			$(".wished-list").show();
			var url = "/wishlist" ;
			let response = await fetch(url);
			data = await response.json();
			console.log(data);
			for (i = 0; i < data.length; i++) {
				$("#wished-items").append("<li class='thumbnail' class='col-sm-4'>\n" +
						"<div class='caption'>\n" +
						"<h3>Name: " + data[i].Name + "</h3>\n" +
						"<p>Price: " + data[i].Price[0] + "</p>\n" +
						"<p>Rating: " + data[i].Rating[0] + "</p>\n" +
						"<p>Address: " + data[i].Address[0] + "</p>\n" +
						"<button id='wish-" + i + "-remove' onclick='removeWished(" + i + ")' class='btn btn-danger'>Remove</button>\n" +
						"</div>\n" +
						"</li>");
			}
		}
	</script>

</body>
<style>
	#hotels {
		height: 500px;
		overflow-y: auto;
		padding: 20px;
		border: 1px solid grey;
		margin: 10px;
	}
	#wished-items {
		height: 500px;
		overflow-y: auto;
		padding: 20px;
		border: 1px solid grey;
		margin: 10px;
	}
</style>

</html>